# ToN Stat Tool - Terror of Nowhere Statistics Tool

**Terror of Nowhere**のゲーム統計情報をリアルタイムで表示・記録するためのWindows アプリケーションです。

## 📋 主な機能

### 🎯 テラー情報表示
- **現在のテラー**をアイコン付きで表示
- **スタン可否**の色分け表示（緑：可能、黄：注意、赤：厳禁、灰：無効、紫：不明）
- **特性アイコン**による直感的な特徴表示（追跡型、徘徊型、即死、速度など）
- **専用サブウィンドウ**での常時表示モード

### 👥 プレイヤー管理
- **プレイヤー一覧**の表示（生存/死亡状態）（※一部の特殊ラウンドでは追跡不可）
- **総人数**と**生存者数**のリアルタイム更新（※インスタンス内の全員を生存者とし、デスログがあると死亡扱い）
- **自分**と**他人**の区別表示

### ⚠️ 警告ユーザー機能
- **警告対象ユーザー**の管理（`warn_user.txt`ファイルで設定）
- 警告ユーザーが参加すると**警告音**と**ウィンドウタイトル通知**でお知らせ
- プレイヤー一覧で警告ユーザーは**オレンジ色で強調表示**
- **ダブルクリック**でプレイヤーを警告リストに追加/削除
- **警告ユーザー一覧**の表示（👤ボタン）
- **警告リスト再読み込み**（🔄ボタン）

### 🔊 サウンド設定
- **プレイヤー参加時**のカスタムサウンド再生
- **プレイヤー退出時**のカスタムサウンド再生
- MP3/WAV形式に対応
- 「🔊 サウンド設定」ボタンから設定可能

### 📊 統計・ログ機能
- **ラウンド統計**（種別ごとの回数と確率）
- **テラー統計**（遭遇回数）
- **ラウンドログ**（時刻、ラウンド種別、マップ、テラー、生存状況）※最大2000件保持
- **リアルタイムイベント**の記録・表示
- **ゲーム情報**の表示（ラウンド状態、マップ、サボタージュ、ページ数）
- **統計リセット**機能

## 🚀 使用方法

### 1. 必要ファイル
以下のファイルが実行ファイルと同じディレクトリに必要です（同梱済）：
- `terrorsInfo.json` - テラー詳細情報データベース
- `warning.mp3` - 警告ユーザー参加時の警告音（オプション）

※最新版の`terrorsInfo.json`はToN日本支部のDiscordサーバから取得（作者：yussy）

### 2. 起動手順
1. **TSM**（ToN Save Manager）を起動し、`WebSocket APIサーバ`を有効にする
2. **ToNStatTool.exe**を起動
3. （必要に応じて）**WebSocket URL**を変更（デフォルト: `ws://localhost:11398`）
4. 「**接続**」ボタンをクリック

### 3. 画面説明

#### メインウィンドウ
- **上部**: 接続設定、ステータス表示、テラー表示ウィンドウボタン、サウンド設定ボタン
- **左上**: 現在のテラー表示エリア
- **右上**: ラウンド情報（ラウンド種別、マップ、状態など）
- **左下**: プレイヤー一覧（👤警告ユーザー表示、🔄リスト再読み込みボタン付き）
- **中央下**: ラウンド統計（ラウンド/テラータブ切替、リセットボタン付き）
- **右下**: ラウンドログ
- **下部**: イベントログと生データ表示

#### サブウィンドウ（テラー表示ウィンドウ）
- 「**テラー表示ウィンドウ**」ボタンで開く
- **常時最前面表示**でゲーム中でも確認可能
- **コンパクト表示**で場所を取らない

## 🎨 アイコン説明

### スタン可否アイコン
- 🟢 **緑色チェック**: スタン可能
- 🟡 **黄色三角**: 注意が必要（条件付き）
- 🔴 **赤色×**: スタン厳禁
- ⚪ **灰色線**: スタン効果なし
- 🟣 **紫色?**: スタン可否不明

### 特性アイコン
- ➡️ **矢印**: 追跡型テラー
- 🔄 **円形矢印**: 徘徊型テラー
- ⚡ **稲妻**: テレポート能力
- 💀 **ドクロ**: 即死攻撃
- ➕ **プラス**: 召喚能力
- ⬇️ **下矢印**: デバフ効果
- 🛡️ **盾**: カウンター能力
- 🟡 **数字付き円**: 速度（数値は最大速度、+は小数点以下切り上げ）
- ••• **3つ点**: 複数体出現

## ⚙️ 設定・カスタマイズ

### 警告ユーザーの設定
`warn_user.txt`ファイルに警告対象のユーザー名を1行1名で記入します：

```
# 警告対象のユーザー名を1行1名で記入してください
# #で始まる行はコメントです
UserName1
UserName2
```

また、プレイヤー一覧で**ダブルクリック**することでも追加/削除ができます。

### サウンド設定
「🔊 サウンド設定」ボタンから以下の設定が可能です：
- **プレイヤー参加時のサウンド**: 有効/無効、ファイルパス
- **プレイヤー退出時のサウンド**: 有効/無効、ファイルパス

設定は`sound_settings.json`に保存されます。

### テラー情報のカスタマイズ
`terrorsInfo.json`ファイルを編集することで、テラーの詳細情報を追加・変更できます：

```json
{
  "テラー名": [
    {
      "スタン": "有効/無効/厳禁/注意"
    },
    {
      "特性名": "特性の説明"
    }
  ]
}
```

### スタン可否の優先順位
1. **JSONファイル**の情報（最優先）
2. **プログラム内設定**（情報が古い場合があります）

## 🔧 技術仕様

- **フレームワーク**: .NET Framework 4.8.1 / Windows Forms
- **通信**: WebSocket
- **データ形式**: JSON
- **対応OS**: Windows
- **言語**: C#

## 📁 主要なファイル構成

```
ToNStatTool/
├── ToNStatTool.exe          # メイン実行ファイル
├── terrorsInfo.json         # テラー情報データベース
├── warn_user.txt            # 警告対象ユーザーリスト
├── warning.mp3              # 警告音ファイル（オプション）
├── sound_settings.json      # サウンド設定ファイル（自動生成）
├── README.md                # このファイル
├── LICENSE                  # ライセンスファイル
└── licenses/                # 各ライセンスファイル
```

## 🐛 トラブルシューティング

### 接続できない場合
- **WebSocket URL**が正しいか確認
- **TSM**（Ton Save Manager）が起動しているか確認
- TSMの**WebSocket APIサーバ**が有効であることを確認

### テラー情報が表示されない場合
- `terrorsInfo.json`ファイルが存在するか確認
- JSONファイルの形式が正しいか確認

### プレイヤーが一覧に表示されない場合
- 一部の特殊ラウンドでは追跡できない場合があります

### 警告音が鳴らない場合
- `warning.mp3`ファイルが存在するか確認
- システム音が有効であることを確認

### 画面表示がおかしい場合
- **解像度**や**DPI設定**を確認
- アプリケーションを**再起動**

## 📊 記録される統計情報
- **総ラウンド数**
- **ラウンド種別別の回数と確率**
- **テラー遭遇履歴**

## 🤝 貢献

- バグ報告や機能要望は、Issuesでお知らせください。
- Pull Requestも歓迎します！

## 📄 License

This project is dual-licensed:
- **Source code**: MIT License
- **JSON data files**: ToNRoundCounter License
- **Sound files**: CC BY 4.0

See LICENSE file and licenses/ directory for full details.

---

不正はせずに、楽しくプレイしましょう。

---

## Copyright

- Application: Copyright (c) 2025 Ogura Deko All rights reserved.
- JSON data: Copyright (c) yussy, 2025. All rights reserved.
- Sound data: OtoLogic(https://otologic.jp) CC BY 4.0
- Terror Image data: Terror Of Nowhere情報wiki (https://wikiwiki.jp/ton_jp/)
- Icon data: Terror of Nowhere world (https://vrchat.com/home/launch?worldId=wrld_a61cdabe-1218-4287-9ffc-2a4d1414e5bd)
